language: c

os:
    - osx
    - linux

compiler:
    - gcc
    - clang

env:
    - DEBUG=1 PLUGINS=1 SSL=1
    - DEBUG=0 PLUGINS=1 SSL=1
    - DEBUG=1 PLUGINS=0 SSL=1
    - DEBUG=0 PLUGINS=0 SSL=1
    - DEBUG=1 PLUGINS=1 SSL=0
    - DEBUG=0 PLUGINS=1 SSL=0
    - DEBUG=1 PLUGINS=0 SSL=0
    - DEBUG=0 PLUGINS=0 SSL=0

before_install:
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install cmocka libyaml; fi
    - if [[ "$TRAVIS_OS_NAME" != "osx" ]]; then ./utils/install_cmocka.sh; fi

script: make && make check
